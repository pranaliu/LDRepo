{"ast":null,"code":"function e(e, n) {\n  var t = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var r = Object.getOwnPropertySymbols(e);\n    n && (r = r.filter(function (n) {\n      return Object.getOwnPropertyDescriptor(e, n).enumerable;\n    })), t.push.apply(t, r);\n  }\n\n  return t;\n}\n\nfunction n(n) {\n  for (var t = 1; t < arguments.length; t++) {\n    var o = null != arguments[t] ? arguments[t] : {};\n    t % 2 ? e(Object(o), !0).forEach(function (e) {\n      r(n, e, o[e]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(n, Object.getOwnPropertyDescriptors(o)) : e(Object(o)).forEach(function (e) {\n      Object.defineProperty(n, e, Object.getOwnPropertyDescriptor(o, e));\n    });\n  }\n\n  return n;\n}\n\nfunction t(e) {\n  return (t = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n    return typeof e;\n  } : function (e) {\n    return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n  })(e);\n}\n\nfunction r(e, n, t) {\n  return n in e ? Object.defineProperty(e, n, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[n] = t, e;\n}\n\nfunction o(e) {\n  return function (e) {\n    if (Array.isArray(e)) return i(e);\n  }(e) || function (e) {\n    if (\"undefined\" != typeof Symbol && null != e[Symbol.iterator] || null != e[\"@@iterator\"]) return Array.from(e);\n  }(e) || function (e, n) {\n    if (e) {\n      if (\"string\" == typeof e) return i(e, n);\n      var t = Object.prototype.toString.call(e).slice(8, -1);\n      return \"Object\" === t && e.constructor && (t = e.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(e) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? i(e, n) : void 0;\n    }\n  }(e) || function () {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }();\n}\n\nfunction i(e, n) {\n  (null == n || n > e.length) && (n = e.length);\n\n  for (var t = 0, r = new Array(n); t < n; t++) {\n    r[t] = e[t];\n  }\n\n  return r;\n}\n\nfunction a(e) {\n  function n(e, n) {\n    Error.captureStackTrace && Error.captureStackTrace(this, this.constructor), this.message = e, this.code = n;\n  }\n\n  return n.prototype = new Error(), n.prototype.name = e, n.prototype.constructor = n, n;\n}\n\nvar u = a(\"LaunchDarklyUnexpectedResponseError\"),\n    s = a(\"LaunchDarklyInvalidEnvironmentIdError\"),\n    c = a(\"LaunchDarklyInvalidUserError\"),\n    l = a(\"LaunchDarklyInvalidEventKeyError\"),\n    f = a(\"LaunchDarklyInvalidArgumentError\"),\n    d = a(\"LaunchDarklyFlagFetchError\"),\n    v = a(\"LaunchDarklyInvalidDataError\");\n\nfunction g(e) {\n  return !(e >= 400 && e < 500) || 400 === e || 408 === e || 429 === e;\n}\n\nfor (var p = Object.freeze({\n  __proto__: null,\n  LDUnexpectedResponseError: u,\n  LDInvalidEnvironmentIdError: s,\n  LDInvalidUserError: c,\n  LDInvalidEventKeyError: l,\n  LDInvalidArgumentError: f,\n  LDFlagFetchError: d,\n  LDInvalidDataError: v,\n  isHttpErrorRecoverable: g\n}), m = [], h = [], y = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\", w = 0, b = y.length; w < b; ++w) {\n  m[w] = y[w], h[y.charCodeAt(w)] = w;\n}\n\nfunction k(e, n, t) {\n  for (var r, o, i = [], a = n; a < t; a += 3) {\n    r = (e[a] << 16 & 16711680) + (e[a + 1] << 8 & 65280) + (255 & e[a + 2]), i.push(m[(o = r) >> 18 & 63] + m[o >> 12 & 63] + m[o >> 6 & 63] + m[63 & o]);\n  }\n\n  return i.join(\"\");\n}\n\nh[\"-\".charCodeAt(0)] = 62, h[\"_\".charCodeAt(0)] = 63;\nvar E = Array.isArray,\n    D = Object.keys,\n    S = Object.prototype.hasOwnProperty,\n    O = [\"key\", \"secondary\", \"ip\", \"country\", \"email\", \"firstName\", \"lastName\", \"avatar\", \"name\"];\n\nfunction P(e, n) {\n  return (e.endsWith(\"/\") ? e.substring(0, e.length - 1) : e) + (n.startsWith(\"/\") ? \"\" : \"/\") + n;\n}\n\nfunction U(e) {\n  return function (e) {\n    for (var n, t = e.length, r = t % 3, o = [], i = 0, a = t - r; i < a; i += 16383) {\n      o.push(k(e, i, i + 16383 > a ? a : i + 16383));\n    }\n\n    return 1 === r ? (n = e[t - 1], o.push(m[n >> 2] + m[n << 4 & 63] + \"==\")) : 2 === r && (n = (e[t - 2] << 8) + e[t - 1], o.push(m[n >> 10] + m[n >> 4 & 63] + m[n << 2 & 63] + \"=\")), o.join(\"\");\n  }(function (e) {\n    for (var n = [], t = 0; t < e.length; t++) {\n      n.push(e.charCodeAt(t));\n    }\n\n    return n;\n  }(unescape(encodeURIComponent(e))));\n}\n\nfunction j(e) {\n  return U(e).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\");\n}\n\nfunction R(e) {\n  return JSON.parse(JSON.stringify(e));\n}\n\nfunction I(e, n) {\n  return function e(n, t) {\n    if (n === t) return !0;\n\n    if (n && t && \"object\" == typeof n && \"object\" == typeof t) {\n      var r,\n          o,\n          i,\n          a = E(n),\n          u = E(t);\n\n      if (a && u) {\n        if ((o = n.length) != t.length) return !1;\n\n        for (r = o; 0 != r--;) {\n          if (!e(n[r], t[r])) return !1;\n        }\n\n        return !0;\n      }\n\n      if (a != u) return !1;\n      var s = n instanceof Date,\n          c = t instanceof Date;\n      if (s != c) return !1;\n      if (s && c) return n.getTime() == t.getTime();\n      var l = n instanceof RegExp,\n          f = t instanceof RegExp;\n      if (l != f) return !1;\n      if (l && f) return n.toString() == t.toString();\n      var d = D(n);\n      if ((o = d.length) !== D(t).length) return !1;\n\n      for (r = o; 0 != r--;) {\n        if (!S.call(t, d[r])) return !1;\n      }\n\n      for (r = o; 0 != r--;) {\n        if (!e(n[i = d[r]], t[i])) return !1;\n      }\n\n      return !0;\n    }\n\n    return n != n && t != t;\n  }(e, n);\n}\n\nfunction T(e) {\n  setTimeout(e, 0);\n}\n\nfunction L(e, n) {\n  var t = e.then(function (e) {\n    return n && setTimeout(function () {\n      n(null, e);\n    }, 0), e;\n  }, function (e) {\n    if (!n) return Promise.reject(e);\n    setTimeout(function () {\n      n(e, null);\n    }, 0);\n  });\n  return n ? void 0 : t;\n}\n\nfunction N(e) {\n  var n = {};\n\n  for (var t in e) {\n    q(e, t) && (n[t] = {\n      value: e[t],\n      version: 0\n    });\n  }\n\n  return n;\n}\n\nfunction A(e) {\n  var n = {};\n\n  for (var t in e) {\n    q(e, t) && (n[t] = e[t].value);\n  }\n\n  return n;\n}\n\nfunction x(e, n) {\n  for (var t, r = n.slice(0), o = [], i = e; r.length > 0;) {\n    for (t = []; i > 0;) {\n      var a = r.shift();\n      if (!a) break;\n      (i -= j(JSON.stringify(a)).length) < 0 && t.length > 0 ? r.unshift(a) : t.push(a);\n    }\n\n    i = e, o.push(t);\n  }\n\n  return o;\n}\n\nfunction C(e) {\n  var n = e.version || \"3.6.0\";\n  return e.userAgent + \"/\" + n;\n}\n\nfunction F() {\n  for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++) {\n    t[r] = arguments[r];\n  }\n\n  return t.reduce(function (e, t) {\n    return n(n({}, e), t);\n  }, {});\n}\n\nfunction q(e, n) {\n  return Object.prototype.hasOwnProperty.call(e, n);\n}\n\nfunction _(e) {\n  if (!e) return e;\n  var t;\n\n  for (var r in O) {\n    var o = O[r],\n        i = e[o];\n    void 0 !== i && \"string\" != typeof i && ((t = t || n({}, e))[o] = String(i));\n  }\n\n  return t || e;\n}\n\nfor (var V = Object.freeze({\n  __proto__: null,\n  appendUrlPath: P,\n  btoa: U,\n  base64URLEncode: j,\n  clone: R,\n  deepEquals: I,\n  onNextTick: T,\n  wrapPromiseCallback: L,\n  transformValuesToVersionedValues: N,\n  transformVersionedValuesToValues: A,\n  chunkUserEventsForUrl: x,\n  getLDUserAgentString: C,\n  extend: F,\n  objectHasOwnProperty: q,\n  sanitizeUser: _\n}), z = function (e, n) {\n  return function (e) {\n    var n = \"undefined\" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || \"undefined\" != typeof msCrypto && \"function\" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (n) {\n      var t = new Uint8Array(16);\n\n      e.exports = function () {\n        return n(t), t;\n      };\n    } else {\n      var r = new Array(16);\n\n      e.exports = function () {\n        for (var e, n = 0; n < 16; n++) {\n          0 == (3 & n) && (e = 4294967296 * Math.random()), r[n] = e >>> ((3 & n) << 3) & 255;\n        }\n\n        return r;\n      };\n    }\n  }(n = {\n    exports: {}\n  }), n.exports;\n}(), J = [], M = 0; M < 256; ++M) {\n  J[M] = (M + 256).toString(16).substr(1);\n}\n\nvar $,\n    H,\n    K = 0,\n    B = 0,\n    G = function G(e, n, t) {\n  var r = n && t || 0,\n      o = n || [],\n      i = (e = e || {}).node || $,\n      a = void 0 !== e.clockseq ? e.clockseq : H;\n\n  if (null == i || null == a) {\n    var u = z();\n    null == i && (i = $ = [1 | u[0], u[1], u[2], u[3], u[4], u[5]]), null == a && (a = H = 16383 & (u[6] << 8 | u[7]));\n  }\n\n  var s = void 0 !== e.msecs ? e.msecs : new Date().getTime(),\n      c = void 0 !== e.nsecs ? e.nsecs : B + 1,\n      l = s - K + (c - B) / 1e4;\n  if (l < 0 && void 0 === e.clockseq && (a = a + 1 & 16383), (l < 0 || s > K) && void 0 === e.nsecs && (c = 0), c >= 1e4) throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  K = s, B = c, H = a;\n  var f = (1e4 * (268435455 & (s += 122192928e5)) + c) % 4294967296;\n  o[r++] = f >>> 24 & 255, o[r++] = f >>> 16 & 255, o[r++] = f >>> 8 & 255, o[r++] = 255 & f;\n  var d = s / 4294967296 * 1e4 & 268435455;\n  o[r++] = d >>> 8 & 255, o[r++] = 255 & d, o[r++] = d >>> 24 & 15 | 16, o[r++] = d >>> 16 & 255, o[r++] = a >>> 8 | 128, o[r++] = 255 & a;\n\n  for (var v = 0; v < 6; ++v) {\n    o[r + v] = i[v];\n  }\n\n  return n || function (e, n) {\n    var t = n || 0,\n        r = J;\n    return [r[e[t++]], r[e[t++]], r[e[t++]], r[e[t++]], \"-\", r[e[t++]], r[e[t++]], \"-\", r[e[t++]], r[e[t++]], \"-\", r[e[t++]], r[e[t++]], \"-\", r[e[t++]], r[e[t++]], r[e[t++]], r[e[t++]], r[e[t++]], r[e[t++]]].join(\"\");\n  }(o);\n},\n    X = [\"debug\", \"info\", \"warn\", \"error\", \"none\"];\n\nfunction W(e, n) {\n  if (e && e.destination && \"function\" != typeof e.destination) throw new Error(\"destination for basicLogger was set to a non-function\");\n\n  function t(e) {\n    return function (n) {\n      console && console[e] && console[e].call(console, n);\n    };\n  }\n\n  var r = e && e.destination ? [e.destination, e.destination, e.destination, e.destination] : [t(\"log\"), t(\"info\"), t(\"warn\"), t(\"error\")],\n      i = !(!e || !e.destination),\n      a = e && void 0 !== e.prefix && null !== e.prefix ? e.prefix : \"[LaunchDarkly] \",\n      u = 1;\n  if (e && e.level) for (var s = 0; s < X.length; s++) {\n    X[s] === e.level && (u = s);\n  }\n\n  function c(e, t, u) {\n    if (!(u.length < 1)) {\n      var s,\n          c = i ? t + \": \" + a : a;\n\n      if (1 !== u.length && n) {\n        var l = o(u);\n        l[0] = c + l[0], s = n.apply(void 0, o(l));\n      } else s = c + u[0];\n\n      try {\n        r[e](s);\n      } catch (e) {\n        console && console.log && console.log(\"[LaunchDarkly] Configured logger's \" + t + \" method threw an exception: \" + e);\n      }\n    }\n  }\n\n  for (var l = {}, f = function f(e) {\n    var n = X[e];\n    if (\"none\" !== n) if (e < u) l[n] = function () {};else {\n      var t = e;\n\n      l[n] = function () {\n        c(t, n, arguments);\n      };\n    }\n  }, d = 0; d < X.length; d++) {\n    f(d);\n  }\n\n  return l;\n}\n\nfunction Q(e, n) {\n  return W({\n    level: e,\n    prefix: n\n  });\n}\n\nfunction Y(e) {\n  return e && e.message ? e.message : \"string\" == typeof e || e instanceof String ? e : JSON.stringify(e);\n}\n\nvar Z = \" Please see https://docs.launchdarkly.com/sdk/client-side/javascript#initializing-the-client for instructions on SDK initialization.\",\n    ee = function ee(e) {\n  return 'Expected application/json content type but got \"' + e + '\"';\n},\n    ne = function ne(e) {\n  return \"local storage is unavailable: \" + Y(e);\n},\n    te = function te(e) {\n  return \"network error\" + (e ? \" (\" + e + \")\" : \"\");\n},\n    re = function re(e) {\n  return 'Custom event \"' + e + '\" does not exist';\n},\n    oe = function oe() {\n  return \"Environment not found. Double check that you specified a valid environment/client-side ID.\" + Z;\n},\n    ie = function ie() {\n  return \"No environment/client-side ID was specified.\" + Z;\n},\n    ae = function ae(e) {\n  return \"Error fetching flag settings: \" + Y(e);\n},\n    ue = function ue() {\n  return \"No user specified.\" + Z;\n},\n    se = function se() {\n  return \"Invalid user specified.\" + Z;\n},\n    ce = function ce() {\n  return \"LaunchDarkly client was initialized with bootstrap data that did not include flag metadata. Events may not be sent correctly.\" + Z;\n},\n    le = function le(e, n) {\n  return n ? '\"' + e + '\" is deprecated, please use \"' + n + '\"' : '\"' + e + '\" is deprecated';\n},\n    fe = function fe(e, n, t) {\n  return \"Received error \" + e + (401 === e ? \" (invalid SDK key)\" : \"\") + \" for \" + n + \" - \" + (g(e) ? t : \"giving up permanently\");\n},\n    de = function de() {\n  return \"Cannot make HTTP requests in this environment.\" + Z;\n},\n    ve = function ve(e) {\n  return \"Opening stream connection to \" + e;\n},\n    ge = function ge(e, n) {\n  return \"Error on stream connection: \" + Y(e) + \", will continue retrying every \" + n + \" milliseconds.\";\n},\n    pe = function pe(e) {\n  return 'Ignoring unknown config option \"' + e + '\"';\n},\n    me = function me(e, n, t) {\n  return 'Config option \"' + e + '\" should be of type ' + n + \", got \" + t + \", using default value\";\n},\n    he = function he(e, n) {\n  return 'Config option \"' + e + '\" should be a boolean, got ' + n + \", converting to boolean\";\n},\n    ye = function ye(e, n, t) {\n  return 'Config option \"' + e + '\" was set to ' + n + \", changing to minimum value of \" + t;\n},\n    we = function we(e) {\n  return \"polling for feature flags at \" + e;\n},\n    be = function be(e) {\n  return 'received streaming update for flag \"' + e + '\"';\n},\n    ke = function ke(e) {\n  return 'received streaming update for flag \"' + e + '\" but ignored due to version check';\n},\n    Ee = function Ee(e) {\n  return 'received streaming deletion for flag \"' + e + '\"';\n},\n    De = function De(e) {\n  return 'received streaming deletion for flag \"' + e + '\" but ignored due to version check';\n},\n    Se = function Se(e) {\n  return 'enqueueing \"' + e + '\" event';\n},\n    Oe = function Oe(e) {\n  return \"sending \" + e + \" events\";\n},\n    Pe = function Pe(e) {\n  return 'Config option \"'.concat(e, '\" must only contain letters, numbers, ., _ or -.');\n},\n    Ue = Object.freeze({\n  __proto__: null,\n  clientInitialized: function clientInitialized() {\n    return \"LaunchDarkly client initialized\";\n  },\n  clientNotReady: function clientNotReady() {\n    return \"LaunchDarkly client is not ready\";\n  },\n  eventCapacityExceeded: function eventCapacityExceeded() {\n    return \"Exceeded event queue capacity. Increase capacity to avoid dropping events.\";\n  },\n  eventWithoutUser: function eventWithoutUser() {\n    return \"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript\";\n  },\n  invalidContentType: ee,\n  invalidKey: function invalidKey() {\n    return \"Event key must be a string\";\n  },\n  localStorageUnavailable: ne,\n  networkError: te,\n  unknownCustomEventKey: re,\n  environmentNotFound: oe,\n  environmentNotSpecified: ie,\n  errorFetchingFlags: ae,\n  userNotSpecified: ue,\n  invalidUser: se,\n  invalidData: function invalidData() {\n    return \"Invalid data received from LaunchDarkly; connection may have been interrupted\";\n  },\n  bootstrapOldFormat: ce,\n  bootstrapInvalid: function bootstrapInvalid() {\n    return \"LaunchDarkly bootstrap data is not available because the back end could not read the flags.\";\n  },\n  deprecated: le,\n  httpErrorMessage: fe,\n  httpUnavailable: de,\n  identifyDisabled: function identifyDisabled() {\n    return \"identify() has no effect here; it must be called on the main client instance\";\n  },\n  streamClosing: function streamClosing() {\n    return \"Closing stream connection\";\n  },\n  streamConnecting: ve,\n  streamError: ge,\n  unknownOption: pe,\n  wrongOptionType: me,\n  wrongOptionTypeBoolean: he,\n  optionBelowMinimum: ye,\n  debugPolling: we,\n  debugStreamPing: function debugStreamPing() {\n    return \"received ping message from stream\";\n  },\n  debugStreamPut: function debugStreamPut() {\n    return \"received streaming update for all flags\";\n  },\n  debugStreamPatch: be,\n  debugStreamPatchIgnored: ke,\n  debugStreamDelete: Ee,\n  debugStreamDeleteIgnored: De,\n  debugEnqueueingEvent: Se,\n  debugPostingEvents: Oe,\n  debugPostingDiagnosticEvent: function debugPostingDiagnosticEvent(e) {\n    return \"sending diagnostic event (\" + e.kind + \")\";\n  },\n  invalidTagValue: Pe\n}),\n    je = {\n  baseUrl: {\n    default: \"https://app.launchdarkly.com\"\n  },\n  streamUrl: {\n    default: \"https://clientstream.launchdarkly.com\"\n  },\n  eventsUrl: {\n    default: \"https://events.launchdarkly.com\"\n  },\n  sendEvents: {\n    default: !0\n  },\n  streaming: {\n    type: \"boolean\"\n  },\n  sendLDHeaders: {\n    default: !0\n  },\n  requestHeaderTransform: {\n    type: \"function\"\n  },\n  inlineUsersInEvents: {\n    default: !1\n  },\n  allowFrequentDuplicateEvents: {\n    default: !1\n  },\n  sendEventsOnlyForVariation: {\n    default: !1\n  },\n  useReport: {\n    default: !1\n  },\n  evaluationReasons: {\n    default: !1\n  },\n  eventCapacity: {\n    default: 100,\n    minimum: 1\n  },\n  flushInterval: {\n    default: 2e3,\n    minimum: 2e3\n  },\n  samplingInterval: {\n    default: 0,\n    minimum: 0\n  },\n  streamReconnectDelay: {\n    default: 1e3,\n    minimum: 0\n  },\n  allAttributesPrivate: {\n    default: !1\n  },\n  privateAttributeNames: {\n    default: []\n  },\n  bootstrap: {\n    type: \"string|object\"\n  },\n  diagnosticRecordingInterval: {\n    default: 9e5,\n    minimum: 2e3\n  },\n  diagnosticOptOut: {\n    default: !1\n  },\n  wrapperName: {\n    type: \"string\"\n  },\n  wrapperVersion: {\n    type: \"string\"\n  },\n  stateProvider: {\n    type: \"object\"\n  },\n  autoAliasingOptOut: {\n    default: !1\n  },\n  application: {\n    validator: function validator(e, n, t, r) {\n      var o = {};\n      return t.id && (o.id = Ie(\"\".concat(e, \".id\"), n, t.id, r)), t.version && (o.version = Ie(\"\".concat(e, \".version\"), n, t.version, r)), o;\n    }\n  }\n},\n    Re = /^(\\w|\\.|-)+$/;\n\nfunction Ie(e, n, t, r) {\n  if (\"string\" == typeof t && t.match(Re)) return t;\n  r.warn(Pe(e));\n}\n\nfunction Te(e, n, r, o) {\n  var i = F({\n    logger: {\n      default: o\n    }\n  }, je, r),\n      a = {\n    all_attributes_private: \"allAttributesPrivate\",\n    private_attribute_names: \"privateAttributeNames\",\n    samplingInterval: null\n  };\n\n  function u(e) {\n    T(function () {\n      n && n.maybeReportError(new f(e));\n    });\n  }\n\n  var s = F({}, e || {});\n  return function (e) {\n    var n = e;\n    Object.keys(a).forEach(function (e) {\n      if (void 0 !== n[e]) {\n        var t = a[e];\n        o && o.warn(le(e, t)), t && (void 0 === n[t] && (n[t] = n[e]), delete n[e]);\n      }\n    });\n  }(s), function (e) {\n    X.forEach(function (n) {\n      if (\"none\" !== n && (!e[n] || \"function\" != typeof e[n])) throw new Error(\"Provided logger instance must support logger.\" + n + \"(...) method\");\n    });\n  }((s = function (e) {\n    var n = F({}, e),\n        r = function r(e) {\n      if (null === e) return \"any\";\n\n      if (void 0 !== e) {\n        if (Array.isArray(e)) return \"array\";\n        var n = t(e);\n        return \"boolean\" === n || \"string\" === n || \"number\" === n || \"function\" === n ? n : \"object\";\n      }\n    };\n\n    return Object.keys(e).forEach(function (t) {\n      var a = e[t];\n\n      if (null != a) {\n        var s = i[t];\n        if (void 0 === s) u(pe(t));else {\n          var c = s.type || r(s.default),\n              l = s.validator;\n\n          if (l) {\n            var f = l(t, e, e[t], o);\n            void 0 !== f ? n[t] = f : delete n[t];\n          } else if (\"any\" !== c) {\n            var d = c.split(\"|\"),\n                v = r(a);\n            d.indexOf(v) < 0 ? \"boolean\" === c ? (n[t] = !!a, u(he(t, v))) : (u(me(t, c, v)), n[t] = s.default) : \"number\" === v && void 0 !== s.minimum && a < s.minimum && (u(ye(t, a, s.minimum)), n[t] = s.minimum);\n          }\n        }\n      }\n    }), n;\n  }(s = function (e) {\n    var n = F({}, e);\n    return Object.keys(i).forEach(function (e) {\n      void 0 !== n[e] && null !== n[e] || (n[e] = i[e] && i[e].default);\n    }), n;\n  }(s))).logger), s;\n}\n\nfunction Le(e) {\n  var n = {};\n  return e && (e.application && void 0 !== e.application.id && null !== e.application.id && (n[\"application-id\"] = [e.application.id]), e.application && void 0 !== e.application.version && null !== e.application.id && (n[\"application-version\"] = [e.application.version])), n;\n}\n\nfunction Ne(e, n) {\n  if (n && !n.sendLDHeaders) return {};\n  var t = {\n    \"X-LaunchDarkly-User-Agent\": C(e)\n  };\n  n && n.wrapperName && (t[\"X-LaunchDarkly-Wrapper\"] = n.wrapperVersion ? n.wrapperName + \"/\" + n.wrapperVersion : n.wrapperName);\n  var r = Le(n),\n      o = Object.keys(r);\n  return o.length && (t[\"x-launchdarkly-tags\"] = o.sort().flatMap(function (e) {\n    return Array.isArray(r[e]) ? r[e].sort().map(function (n) {\n      return \"\".concat(e, \"/\").concat(n);\n    }) : [\"\".concat(e, \"/\").concat(r[e])];\n  }).join(\" \")), t;\n}\n\nfunction Ae(e, t) {\n  return t && t.requestHeaderTransform ? t.requestHeaderTransform(n({}, e)) : e;\n}\n\nfunction xe(e, n, t) {\n  var r = \"/a/\" + n + \".gif\",\n      o = F({\n    \"Content-Type\": \"application/json\"\n  }, Ne(e, t)),\n      i = e.httpFallbackPing,\n      a = {\n    sendChunk: function sendChunk(n, a, u, s) {\n      var c = JSON.stringify(n),\n          l = u ? null : G();\n      return s ? function n(r) {\n        var i = u ? o : F({}, o, {\n          \"X-LaunchDarkly-Event-Schema\": \"3\",\n          \"X-LaunchDarkly-Payload-ID\": l\n        });\n        return e.httpRequest(\"POST\", a, Ae(i, t), c).promise.then(function (e) {\n          if (e) return e.status >= 400 && g(e.status) && r ? n(!1) : function (e) {\n            var n = {\n              status: e.status\n            },\n                t = e.header(\"date\");\n\n            if (t) {\n              var r = Date.parse(t);\n              r && (n.serverTime = r);\n            }\n\n            return n;\n          }(e);\n        }).catch(function () {\n          return r ? n(!1) : Promise.reject();\n        });\n      }(!0).catch(function () {}) : (i && i(a + r + \"?d=\" + j(c)), Promise.resolve());\n    },\n    sendEvents: function sendEvents(n, t, r) {\n      if (!e.httpRequest) return Promise.resolve();\n      var o,\n          i = e.httpAllowsPost();\n      o = i ? [n] : x(2e3 - t.length, n);\n\n      for (var u = [], s = 0; s < o.length; s++) {\n        u.push(a.sendChunk(o[s], t, r, i));\n      }\n\n      return Promise.all(u);\n    }\n  };\n  return a;\n}\n\nfunction Ce() {\n  var e = {},\n      n = 0,\n      t = 0,\n      r = {};\n  return e.summarizeEvent = function (e) {\n    if (\"feature\" === e.kind) {\n      var o = e.key + \":\" + (null !== e.variation && void 0 !== e.variation ? e.variation : \"\") + \":\" + (null !== e.version && void 0 !== e.version ? e.version : \"\"),\n          i = r[o];\n      i ? i.count = i.count + 1 : r[o] = {\n        count: 1,\n        key: e.key,\n        variation: e.variation,\n        version: e.version,\n        value: e.value,\n        default: e.default\n      }, (0 === n || e.creationDate < n) && (n = e.creationDate), e.creationDate > t && (t = e.creationDate);\n    }\n  }, e.getSummary = function () {\n    var e = {},\n        o = !0;\n\n    for (var i in r) {\n      var a = r[i],\n          u = e[a.key];\n      u || (u = {\n        default: a.default,\n        counters: []\n      }, e[a.key] = u);\n      var s = {\n        value: a.value,\n        count: a.count\n      };\n      void 0 !== a.variation && null !== a.variation && (s.variation = a.variation), a.version ? s.version = a.version : s.unknown = !0, u.counters.push(s), o = !1;\n    }\n\n    return o ? null : {\n      startDate: n,\n      endDate: t,\n      features: e\n    };\n  }, e.clearSummary = function () {\n    n = 0, t = 0, r = {};\n  }, e;\n}\n\nfunction Fe(e) {\n  var n = {},\n      t = e.allAttributesPrivate,\n      r = e.privateAttributeNames || [],\n      o = {\n    key: !0,\n    custom: !0,\n    anonymous: !0\n  },\n      i = {\n    key: !0,\n    secondary: !0,\n    ip: !0,\n    country: !0,\n    email: !0,\n    firstName: !0,\n    lastName: !0,\n    avatar: !0,\n    name: !0,\n    anonymous: !0,\n    custom: !0\n  };\n  return n.filterUser = function (e) {\n    if (!e) return null;\n\n    var n = e.privateAttributeNames || [],\n        a = function a(e, i) {\n      return Object.keys(e).reduce(function (a, u) {\n        var s = a;\n        return i(u) && (function (e) {\n          return !o[e] && (t || -1 !== n.indexOf(e) || -1 !== r.indexOf(e));\n        }(u) ? s[1][u] = !0 : s[0][u] = e[u]), s;\n      }, [{}, {}]);\n    },\n        u = a(e, function (e) {\n      return i[e];\n    }),\n        s = u[0],\n        c = u[1];\n\n    if (e.custom) {\n      var l = a(e.custom, function () {\n        return !0;\n      });\n      s.custom = l[0], c = F({}, c, l[1]);\n    }\n\n    var f = Object.keys(c);\n    return f.length && (f.sort(), s.privateAttrs = f), s;\n  }, n;\n}\n\nfunction qe(e, n, t, r) {\n  var o = {};\n\n  function i() {\n    var e = \"\",\n        o = r.getUser();\n    return o && (e = t || U(JSON.stringify(o))), \"ld:\" + n + \":\" + e;\n  }\n\n  return o.loadFlags = function () {\n    return e.get(i()).then(function (e) {\n      if (null == e) return null;\n\n      try {\n        var n = JSON.parse(e);\n\n        if (n) {\n          var t = n.$schema;\n          void 0 === t || t < 1 ? n = N(n) : delete n.$schema;\n        }\n\n        return n;\n      } catch (e) {\n        return o.clearFlags().then(function () {\n          return null;\n        });\n      }\n    });\n  }, o.saveFlags = function (n) {\n    var t = F({}, n, {\n      $schema: 1\n    });\n    return e.set(i(), JSON.stringify(t));\n  }, o.clearFlags = function () {\n    return e.clear(i());\n  }, o;\n}\n\nfunction _e(e, n, t, r) {\n  var o,\n      i = n.streamUrl,\n      a = n.logger,\n      u = {},\n      s = P(i, \"/eval/\" + t),\n      c = n.useReport,\n      l = n.evaluationReasons,\n      f = n.streamReconnectDelay,\n      d = Ne(e, n),\n      v = !1,\n      g = null,\n      p = null,\n      m = null,\n      h = null,\n      y = null;\n\n  function w(e) {\n    v || (a.warn(ge(e, f)), v = !0), D(!1), E(), b(f);\n  }\n\n  function b(e) {\n    p || (e ? p = setTimeout(k, e) : k());\n  }\n\n  function k() {\n    var r;\n    p = null;\n    var u = \"\",\n        f = {\n      headers: d,\n      readTimeoutMillis: 3e5\n    };\n\n    if (e.eventSourceFactory) {\n      for (var v in null != h && (u = \"h=\" + h), c ? e.eventSourceAllowsReport ? (r = s, f.method = \"REPORT\", f.headers[\"Content-Type\"] = \"application/json\", f.body = JSON.stringify(m)) : (r = P(i, \"/ping/\" + t), u = \"\") : r = s + \"/\" + j(JSON.stringify(m)), f.headers = Ae(f.headers, n), l && (u = u + (u ? \"&\" : \"\") + \"withReasons=true\"), r = r + (u ? \"?\" : \"\") + u, E(), a.info(ve(r)), o = new Date().getTime(), g = e.eventSourceFactory(r, f), y) {\n        q(y, v) && g.addEventListener(v, y[v]);\n      }\n\n      g.onerror = w;\n    }\n  }\n\n  function E() {\n    g && (a.info(\"Closing stream connection\"), g.close(), g = null);\n  }\n\n  function D(e) {\n    o && r && r.recordStreamInit(o, !e, new Date().getTime() - o), o = null;\n  }\n\n  return u.connect = function (e, n, t) {\n    m = e, h = n, y = {};\n\n    var r = function r(e) {\n      y[e] = function (n) {\n        v = !1, D(!0), t[e] && t[e](n);\n      };\n    };\n\n    for (var o in t || {}) {\n      r(o);\n    }\n\n    b();\n  }, u.disconnect = function () {\n    clearTimeout(p), p = null, E();\n  }, u.isConnected = function () {\n    return !!(g && e.eventSourceIsActive && e.eventSourceIsActive(g));\n  }, u;\n}\n\nfunction Ve(e, n, t) {\n  var r = n.baseUrl,\n      o = n.useReport,\n      i = n.evaluationReasons,\n      a = n.logger,\n      u = {},\n      c = {};\n\n  function l(t, r) {\n    if (!e.httpRequest) return new Promise(function (e, n) {\n      n(new d(de()));\n    });\n    var o = r ? \"REPORT\" : \"GET\",\n        i = Ne(e, n);\n    r && (i[\"Content-Type\"] = \"application/json\");\n    var a = c[t];\n    a || (a = function (e) {\n      var n,\n          t,\n          r,\n          o,\n          i = {\n        addPromise: function addPromise(i, a) {\n          n = i, t && t(), t = a, i.then(function (t) {\n            n === i && (r(t), e && e());\n          }, function (t) {\n            n === i && (o(t), e && e());\n          });\n        }\n      };\n      return i.resultPromise = new Promise(function (e, n) {\n        r = e, o = n;\n      }), i;\n    }(function () {\n      delete c[t];\n    }), c[t] = a);\n    var u = e.httpRequest(o, t, Ae(i, n), r),\n        l = u.promise.then(function (e) {\n      if (200 === e.status) {\n        if (e.header(\"content-type\") && \"application/json\" === e.header(\"content-type\").substring(0, \"application/json\".length)) return JSON.parse(e.body);\n        var n = ee(e.header(\"content-type\") || \"\");\n        return Promise.reject(new d(n));\n      }\n\n      return Promise.reject(function (e) {\n        return 404 === e.status ? new s(oe()) : new d(ae(e.statusText || String(e.status)));\n      }(e));\n    }, function (e) {\n      return Promise.reject(new d(te(e)));\n    });\n    return a.addPromise(l, function () {\n      u.cancel && u.cancel();\n    }), a.resultPromise;\n  }\n\n  return u.fetchJSON = function (e) {\n    return l(P(r, e), null);\n  }, u.fetchFlagSettings = function (e, n) {\n    var u,\n        s,\n        c,\n        f = \"\";\n    return o ? (s = [r, \"/sdk/evalx/\", t, \"/user\"].join(\"\"), c = JSON.stringify(e)) : (u = j(JSON.stringify(e)), s = [r, \"/sdk/evalx/\", t, \"/users/\", u].join(\"\")), n && (f = \"h=\" + n), i && (f = f + (f ? \"&\" : \"\") + \"withReasons=true\"), s = s + (f ? \"?\" : \"\") + f, a.debug(we(s)), l(s, c);\n  }, u;\n}\n\nfunction ze(e) {\n  var n = {\n    validateUser: function validateUser(n) {\n      if (!n) return Promise.reject(new c(ue()));\n      var t = R(n);\n      return null !== t.key && void 0 !== t.key ? (t.key = t.key.toString(), Promise.resolve(t)) : t.anonymous ? e.get(\"ld:$anonUserId\").then(function (n) {\n        if (n) return t.key = n, t;\n        var r = G();\n        return t.key = r, function (n) {\n          return e.set(\"ld:$anonUserId\", n);\n        }(r).then(function () {\n          return t;\n        });\n      }) : Promise.reject(new c(se()));\n    }\n  };\n  return n;\n}\n\nvar Je = Object.freeze({\n  __proto__: null,\n  baseOptionDefs: je,\n  validate: Te,\n  getTags: Le\n}).baseOptionDefs,\n    Me = V.appendUrlPath,\n    $e = function $e(e) {\n  var n = {\n    diagnosticId: G()\n  };\n  return e && (n.sdkKeySuffix = e.length > 6 ? e.substring(e.length - 6) : e), n;\n};\n\nfunction He(e, r, o, i, a) {\n  var c,\n      f,\n      p,\n      m = o && o.logger ? o.logger : a && a.logger && a.logger.default || Q(\"warn\"),\n      h = function (e) {\n    var n = {},\n        t = {};\n    return n.on = function (e, n, r) {\n      t[e] = t[e] || [], t[e] = t[e].concat({\n        handler: n,\n        context: r\n      });\n    }, n.off = function (e, n, r) {\n      if (t[e]) for (var o = 0; o < t[e].length; o++) {\n        t[e][o].handler === n && t[e][o].context === r && (t[e] = t[e].slice(0, o).concat(t[e].slice(o + 1)));\n      }\n    }, n.emit = function (e) {\n      if (t[e]) for (var n = t[e].slice(0), r = 0; r < n.length; r++) {\n        n[r].handler.apply(n[r].context, Array.prototype.slice.call(arguments, 1));\n      }\n    }, n.getEvents = function () {\n      return Object.keys(t);\n    }, n.getEventListenerCount = function (e) {\n      return t[e] ? t[e].length : 0;\n    }, n.maybeReportError = function (n) {\n      n && (t.error ? this.emit(\"error\", n) : (e || console).error(n.message));\n    }, n;\n  }(m),\n      y = function (e) {\n    var n = !1,\n        t = !1,\n        r = null,\n        o = null,\n        i = new Promise(function (n) {\n      e.on(\"ready\", function t() {\n        e.off(\"ready\", t), n();\n      });\n    }).catch(function () {});\n    return {\n      getInitializationPromise: function getInitializationPromise() {\n        return o || (n ? Promise.resolve() : t ? Promise.reject(r) : o = new Promise(function (n, t) {\n          e.on(\"initialized\", function t() {\n            e.off(\"initialized\", t), n();\n          }), e.on(\"failed\", function n(r) {\n            e.off(\"failed\", n), t(r);\n          });\n        }));\n      },\n      getReadyPromise: function getReadyPromise() {\n        return i;\n      },\n      signalSuccess: function signalSuccess() {\n        n || t || (n = !0, e.emit(\"initialized\"), e.emit(\"ready\"));\n      },\n      signalFailure: function signalFailure(o) {\n        n || t || (t = !0, r = o, e.emit(\"failed\", o), e.emit(\"ready\")), e.maybeReportError(o);\n      }\n    };\n  }(h),\n      w = Te(o, h, a, m),\n      b = w.sendEvents,\n      k = e,\n      E = w.hash,\n      D = function (e, n) {\n    var t = {},\n        r = !1,\n        o = function o(e) {\n      r || (r = !0, n.warn(ne(e)));\n    };\n\n    return t.isEnabled = function () {\n      return !!e;\n    }, t.get = function (n) {\n      return new Promise(function (t) {\n        e ? e.get(n).then(t).catch(function (e) {\n          o(e), t(void 0);\n        }) : t(void 0);\n      });\n    }, t.set = function (n, t) {\n      return new Promise(function (r) {\n        e ? e.set(n, t).then(function () {\n          return r(!0);\n        }).catch(function (e) {\n          o(e), r(!1);\n        }) : r(!1);\n      });\n    }, t.clear = function (n) {\n      return new Promise(function (t) {\n        e ? e.clear(n).then(function () {\n          return t(!0);\n        }).catch(function (e) {\n          o(e), t(!1);\n        }) : t(!1);\n      });\n    }, t;\n  }(i.localStorage, m),\n      S = xe(i, k, w),\n      O = w.sendEvents && !w.diagnosticOptOut,\n      U = O ? $e(k) : null,\n      j = O ? function (e) {\n    var n, t, r, o;\n\n    function i(e) {\n      n = e, t = 0, r = 0, o = [];\n    }\n\n    return i(e), {\n      getProps: function getProps() {\n        return {\n          dataSinceDate: n,\n          droppedEvents: t,\n          eventsInLastBatch: r,\n          streamInits: o\n        };\n      },\n      setProps: function setProps(e) {\n        n = e.dataSinceDate, t = e.droppedEvents || 0, r = e.eventsInLastBatch || 0, o = e.streamInits || [];\n      },\n      incrementDroppedEvents: function incrementDroppedEvents() {\n        t++;\n      },\n      setEventsInLastBatch: function setEventsInLastBatch(e) {\n        r = e;\n      },\n      recordStreamInit: function recordStreamInit(e, n, t) {\n        var r = {\n          timestamp: e,\n          failed: n,\n          durationMillis: t\n        };\n        o.push(r);\n      },\n      reset: i\n    };\n  }(new Date().getTime()) : null,\n      N = O ? function (e, t, r, o, i, a, u) {\n    var s,\n        c,\n        l = !!e.diagnosticUseCombinedEvent,\n        f = \"ld:\" + i + \":$diagnostics\",\n        d = Me(a.eventsUrl, \"/events/diagnostic/\" + i),\n        v = a.diagnosticRecordingInterval,\n        g = r,\n        p = !!a.streaming,\n        m = {};\n\n    function h() {\n      return {\n        sdk: b(),\n        configuration: (n = {\n          customBaseURI: a.baseUrl !== Je.baseUrl.default,\n          customStreamURI: a.streamUrl !== Je.streamUrl.default,\n          customEventsURI: a.eventsUrl !== Je.eventsUrl.default,\n          eventsCapacity: a.eventCapacity,\n          eventsFlushIntervalMillis: a.flushInterval,\n          reconnectTimeMillis: a.streamReconnectDelay,\n          streamingDisabled: !p,\n          allAttributesPrivate: !!a.allAttributesPrivate,\n          inlineUsersInEvents: !!a.inlineUsersInEvents,\n          diagnosticRecordingIntervalMillis: a.diagnosticRecordingInterval,\n          usingSecureMode: !!a.hash,\n          bootstrapMode: !!a.bootstrap,\n          fetchGoalsDisabled: !a.fetchGoals,\n          allowFrequentDuplicateEvents: !!a.allowFrequentDuplicateEvents,\n          sendEventsOnlyForVariation: !!a.sendEventsOnlyForVariation,\n          autoAliasingOptOut: !!a.autoAliasingOptOut\n        }, n),\n        platform: e.diagnosticPlatformData\n      };\n      var n;\n    }\n\n    function y(e) {\n      a.logger && a.logger.debug(Ue.debugPostingDiagnosticEvent(e)), o.sendEvents(e, d, !0).then(function () {}).catch(function () {});\n    }\n\n    function w() {\n      var e, r;\n      y((e = new Date().getTime(), r = n({\n        kind: l ? \"diagnostic-combined\" : \"diagnostic\",\n        id: u,\n        creationDate: e\n      }, g.getProps()), l && (r = n(n({}, r), h())), g.reset(e), r)), c = setTimeout(w, v), s = new Date().getTime(), l && function () {\n        if (t.isEnabled()) {\n          var e = n({}, g.getProps());\n          t.set(f, JSON.stringify(e));\n        }\n      }();\n    }\n\n    function b() {\n      var t = n({}, e.diagnosticSdkData);\n      return a.wrapperName && (t.wrapperName = a.wrapperName), a.wrapperVersion && (t.wrapperVersion = a.wrapperVersion), t;\n    }\n\n    return m.start = function () {\n      l ? function (e) {\n        if (!t.isEnabled()) return e(!1);\n        t.get(f).then(function (n) {\n          if (n) try {\n            var t = JSON.parse(n);\n            g.setProps(t), s = t.dataSinceDate;\n          } catch (e) {}\n          e(!0);\n        }).catch(function () {\n          e(!1);\n        });\n      }(function (e) {\n        if (e) {\n          var n = (s || 0) + v,\n              t = new Date().getTime();\n          t >= n ? w() : c = setTimeout(w, n - t);\n        } else 0 === Math.floor(4 * Math.random()) ? w() : c = setTimeout(w, v);\n      }) : (y(n({\n        kind: \"diagnostic-init\",\n        id: u,\n        creationDate: g.getProps().dataSinceDate\n      }, h())), c = setTimeout(w, v));\n    }, m.stop = function () {\n      c && clearTimeout(c);\n    }, m.setStreaming = function (e) {\n      p = e;\n    }, m;\n  }(i, D, j, S, k, w, U) : null,\n      x = _e(i, w, k, j),\n      C = w.eventProcessor || function (e, n, t) {\n    var r,\n        o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,\n        i = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : null,\n        a = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : null,\n        s = {},\n        c = a || xe(e, t, n),\n        l = P(n.eventsUrl, \"/events/bulk/\" + t),\n        f = Ce(),\n        d = Fe(n),\n        v = n.inlineUsersInEvents,\n        p = n.samplingInterval,\n        m = n.eventCapacity,\n        h = n.flushInterval,\n        y = n.logger,\n        w = [],\n        b = 0,\n        k = !1,\n        E = !1;\n\n    function D() {\n      return 0 === p || 0 === Math.floor(Math.random() * p);\n    }\n\n    function S(e) {\n      return !!e.debugEventsUntilDate && e.debugEventsUntilDate > b && e.debugEventsUntilDate > new Date().getTime();\n    }\n\n    function O(e) {\n      var n = F({}, e);\n      return \"alias\" === e.kind || (v || \"identify\" === e.kind ? n.user = d.filterUser(e.user) : (n.userKey = e.user.key, delete n.user), \"feature\" === e.kind && (delete n.trackEvents, delete n.debugEventsUntilDate)), n;\n    }\n\n    function U(e) {\n      w.length < m ? (w.push(e), E = !1) : (E || (E = !0, y.warn(\"Exceeded event queue capacity. Increase capacity to avoid dropping events.\")), o && o.incrementDroppedEvents());\n    }\n\n    return s.enqueue = function (e) {\n      if (!k) {\n        var n = !1,\n            t = !1;\n\n        if (f.summarizeEvent(e), \"feature\" === e.kind ? D() && (n = !!e.trackEvents, t = S(e)) : n = D(), n && U(O(e)), t) {\n          var r = F({}, e, {\n            kind: \"debug\"\n          });\n          r.user = d.filterUser(r.user), delete r.trackEvents, delete r.debugEventsUntilDate, U(r);\n        }\n      }\n    }, s.flush = function () {\n      if (k) return Promise.resolve();\n      var e = w,\n          n = f.getSummary();\n      return f.clearSummary(), n && (n.kind = \"summary\", e.push(n)), o && o.setEventsInLastBatch(e.length), 0 === e.length ? Promise.resolve() : (w = [], y.debug(Oe(e.length)), c.sendEvents(e, l).then(function (e) {\n        e && (e.serverTime && (b = e.serverTime), g(e.status) || (k = !0), e.status >= 400 && T(function () {\n          i.maybeReportError(new u(fe(e.status, \"event posting\", \"some events were dropped\")));\n        }));\n      }));\n    }, s.start = function () {\n      r = setTimeout(function e() {\n        s.flush(), r = setTimeout(e, h);\n      }, h);\n    }, s.stop = function () {\n      clearTimeout(r);\n    }, s;\n  }(i, w, k, j, h, S),\n      V = Ve(i, w, k),\n      z = {},\n      J = {},\n      M = w.streaming,\n      $ = !1,\n      H = !1,\n      K = !0,\n      B = w.stateProvider,\n      G = function (e, n) {\n    var t,\n        r = {\n      setUser: function setUser(e) {\n        var r = t && R(t);\n        (t = _(e)) && n && n(R(t), r);\n      },\n      getUser: function getUser() {\n        return t ? R(t) : null;\n      }\n    };\n    return r;\n  }(0, function (e, n) {\n    (function (e) {\n      B || e && Y({\n        kind: \"identify\",\n        key: e.key,\n        user: e,\n        creationDate: new Date().getTime()\n      });\n    })(e), !w.autoAliasingOptOut && n && n.anonymous && e && !e.anonymous && ue(e, n);\n  }),\n      X = ze(D),\n      W = D.isEnabled() ? new qe(D, k, E, G, m) : null;\n\n  function Y(e) {\n    if (k && !(B && B.enqueueEvent && B.enqueueEvent(e))) {\n      if (\"alias\" !== e.kind) {\n        if (!e.user) return void (K && (m.warn(\"Be sure to call `identify` in the LaunchDarkly client: https://docs.launchdarkly.com/sdk/features/identify#javascript\"), K = !1));\n        K = !1;\n      }\n\n      !b || H || i.isDoNotTrack() || (m.debug(Se(e.kind)), C.enqueue(e));\n    }\n  }\n\n  function Z(e, n, t, r) {\n    var o = G.getUser(),\n        i = new Date(),\n        a = n ? n.value : null;\n\n    if (!w.allowFrequentDuplicateEvents) {\n      var u = JSON.stringify(a) + (o && o.key ? o.key : \"\") + e,\n          s = z[u];\n      if (s && i - s < 3e5) return;\n      z[u] = i;\n    }\n\n    var c = {\n      kind: \"feature\",\n      key: e,\n      user: o,\n      value: a,\n      variation: n ? n.variationIndex : null,\n      default: t,\n      creationDate: i.getTime()\n    };\n    o && o.anonymous && (c.contextKind = oe(o));\n    var l = J[e];\n    l && (c.version = l.flagVersion ? l.flagVersion : l.version, c.trackEvents = l.trackEvents, c.debugEventsUntilDate = l.debugEventsUntilDate), (r || l && l.trackReason) && n && (c.reason = n.reason), Y(c);\n  }\n\n  function ee(e, n, t, r) {\n    var o;\n\n    if (J && q(J, e) && J[e] && !J[e].deleted) {\n      var i = J[e];\n      o = te(i), null !== i.value && void 0 !== i.value || (o.value = n);\n    } else o = {\n      value: n,\n      variationIndex: null,\n      reason: {\n        kind: \"ERROR\",\n        errorKind: \"FLAG_NOT_FOUND\"\n      }\n    };\n\n    return t && Z(e, o, n, r), o;\n  }\n\n  function te(e) {\n    return {\n      value: e.value,\n      variationIndex: void 0 === e.variation ? null : e.variation,\n      reason: e.reason || null\n    };\n  }\n\n  function oe(e) {\n    return e.anonymous ? \"anonymousUser\" : \"user\";\n  }\n\n  function ue(e, n) {\n    B || e && n && Y({\n      kind: \"alias\",\n      key: e.key,\n      contextKind: oe(e),\n      previousKey: n.key,\n      previousContextKind: oe(n),\n      creationDate: new Date().getTime()\n    });\n  }\n\n  function se() {\n    if (f = !0, G.getUser()) {\n      var e = function e(_e2) {\n        try {\n          return JSON.parse(_e2);\n        } catch (e) {\n          return void h.maybeReportError(new v(\"Invalid data received from LaunchDarkly; connection may have been interrupted\"));\n        }\n      };\n\n      x.connect(G.getUser(), E, {\n        ping: function ping() {\n          m.debug(\"received ping message from stream\");\n          var e = G.getUser();\n          V.fetchFlagSettings(e, E).then(function (n) {\n            I(e, G.getUser()) && de(n || {});\n          }).catch(function (e) {\n            h.maybeReportError(new d(ae(e)));\n          });\n        },\n        put: function put(n) {\n          var t = e(n.data);\n          t && (m.debug(\"received streaming update for all flags\"), de(t));\n        },\n        patch: function patch(n) {\n          var t = e(n.data);\n\n          if (t) {\n            var r = J[t.key];\n\n            if (!r || !r.version || !t.version || r.version < t.version) {\n              m.debug(be(t.key));\n              var o = {},\n                  i = F({}, t);\n              delete i.key, J[t.key] = i;\n              var a = te(i);\n              o[t.key] = r ? {\n                previous: r.value,\n                current: a\n              } : {\n                current: a\n              }, ve(o);\n            } else m.debug(ke(t.key));\n          }\n        },\n        delete: function _delete(n) {\n          var t = e(n.data);\n          if (t) if (!J[t.key] || J[t.key].version < t.version) {\n            m.debug(Ee(t.key));\n            var r = {};\n            J[t.key] && !J[t.key].deleted && (r[t.key] = {\n              previous: J[t.key].value\n            }), J[t.key] = {\n              version: t.version,\n              deleted: !0\n            }, ve(r);\n          } else m.debug(De(t.key));\n        }\n      });\n    }\n  }\n\n  function le() {\n    f && (x.disconnect(), f = !1);\n  }\n\n  function de(e) {\n    var t = {};\n    if (!e) return Promise.resolve();\n\n    for (var r in J) {\n      q(J, r) && J[r] && (e[r] && !I(e[r].value, J[r].value) ? t[r] = {\n        previous: J[r].value,\n        current: te(e[r])\n      } : e[r] && !e[r].deleted || (t[r] = {\n        previous: J[r].value\n      }));\n    }\n\n    for (var o in e) {\n      q(e, o) && e[o] && (!J[o] || J[o].deleted) && (t[o] = {\n        current: te(e[o])\n      });\n    }\n\n    return J = n({}, e), ve(t).catch(function () {});\n  }\n\n  function ve(e) {\n    var n = Object.keys(e);\n\n    if (n.length > 0) {\n      var t = {};\n      n.forEach(function (n) {\n        var r = e[n].current,\n            o = r ? r.value : void 0,\n            i = e[n].previous;\n        h.emit(\"change:\" + n, o, i), t[n] = r ? {\n          current: o,\n          previous: i\n        } : {\n          previous: i\n        };\n      }), h.emit(\"change\", t), h.emit(\"internal-change\", J), w.sendEventsOnlyForVariation || B || n.forEach(function (n) {\n        Z(n, e[n].current);\n      });\n    }\n\n    return c && W ? W.saveFlags(J) : Promise.resolve();\n  }\n\n  function ge() {\n    var e = M || p && void 0 === M;\n    e && !f ? se() : !e && f && le(), N && N.setStreaming(e);\n  }\n\n  function pe(e) {\n    return \"change\" === e || \"change:\" === e.substr(0, \"change\".length + 1);\n  }\n\n  if (\"string\" == typeof w.bootstrap && \"LOCALSTORAGE\" === w.bootstrap.toUpperCase() && (W ? c = !0 : m.warn(ne())), \"object\" === t(w.bootstrap) && (J = function (e) {\n    var n = Object.keys(e),\n        t = e.$flagsState;\n    !t && n.length && m.warn(ce()), !1 === e.$valid && m.warn(\"LaunchDarkly bootstrap data is not available because the back end could not read the flags.\");\n    var r = {};\n    return n.forEach(function (n) {\n      if (\"$flagsState\" !== n && \"$valid\" !== n) {\n        var o = {\n          value: e[n]\n        };\n        t && t[n] ? o = F(o, t[n]) : o.version = 0, r[n] = o;\n      }\n    }), r;\n  }(w.bootstrap)), B) {\n    var me = B.getInitialState();\n    me ? he(me) : B.on(\"init\", he), B.on(\"update\", function (e) {\n      e.user && G.setUser(e.user), e.flags && de(e.flags);\n    });\n  } else (e ? X.validateUser(r).then(function (e) {\n    return G.setUser(e), \"object\" === t(w.bootstrap) ? ye() : c ? W.loadFlags().then(function (e) {\n      return null == e ? (J = {}, V.fetchFlagSettings(G.getUser(), E).then(function (e) {\n        return de(e || {});\n      }).then(ye).catch(function (e) {\n        we(new d(ae(e)));\n      })) : (J = e, T(ye), V.fetchFlagSettings(G.getUser(), E).then(function (e) {\n        return de(e);\n      }).catch(function (e) {\n        return h.maybeReportError(e);\n      }));\n    }) : V.fetchFlagSettings(G.getUser(), E).then(function (e) {\n      J = e || {}, ye();\n    }).catch(function (e) {\n      J = {}, we(e);\n    });\n  }) : Promise.reject(new s(ie()))).catch(we);\n\n  function he(e) {\n    k = e.environment, G.setUser(e.user), J = n({}, e.flags), T(ye);\n  }\n\n  function ye() {\n    m.info(\"LaunchDarkly client initialized\"), $ = !0, ge(), y.signalSuccess();\n  }\n\n  function we(e) {\n    y.signalFailure(e);\n  }\n\n  return {\n    client: {\n      waitForInitialization: function waitForInitialization() {\n        return y.getInitializationPromise();\n      },\n      waitUntilReady: function waitUntilReady() {\n        return y.getReadyPromise();\n      },\n      identify: function identify(e, n, t) {\n        return H ? L(Promise.resolve({}), t) : B ? (m.warn(\"identify() has no effect here; it must be called on the main client instance\"), L(Promise.resolve(A(J)), t)) : L((c && W ? W.clearFlags() : Promise.resolve()).then(function () {\n          return X.validateUser(e);\n        }).then(function (e) {\n          return V.fetchFlagSettings(e, n).then(function (t) {\n            var r = A(t);\n            return G.setUser(e), E = n, t ? de(t).then(function () {\n              return r;\n            }) : r;\n          });\n        }).then(function (e) {\n          return f && se(), e;\n        }).catch(function (e) {\n          return h.maybeReportError(e), Promise.reject(e);\n        }), t);\n      },\n      getUser: function getUser() {\n        return G.getUser();\n      },\n      variation: function variation(e, n) {\n        return ee(e, n, !0, !1).value;\n      },\n      variationDetail: function variationDetail(e, n) {\n        return ee(e, n, !0, !0);\n      },\n      track: function track(e, n, t) {\n        if (\"string\" == typeof e) {\n          i.customEventFilter && !i.customEventFilter(e) && m.warn(re(e));\n          var r = G.getUser(),\n              o = {\n            kind: \"custom\",\n            key: e,\n            user: r,\n            url: i.getCurrentUrl(),\n            creationDate: new Date().getTime()\n          };\n          r && r.anonymous && (o.contextKind = oe(r)), null != n && (o.data = n), null != t && (o.metricValue = t), Y(o);\n        } else h.maybeReportError(new l(re(e)));\n      },\n      alias: ue,\n      on: function on(e, n, t) {\n        pe(e) ? (p = !0, $ && ge(), h.on(e, n, t)) : h.on.apply(h, arguments);\n      },\n      off: function off(e) {\n        if (h.off.apply(h, arguments), pe(e)) {\n          var n = !1;\n          h.getEvents().forEach(function (e) {\n            pe(e) && h.getEventListenerCount(e) > 0 && (n = !0);\n          }), n || (p = !1, f && void 0 === M && le());\n        }\n      },\n      setStreaming: function setStreaming(e) {\n        var n = null === e ? void 0 : e;\n        n !== M && (M = n, ge());\n      },\n      flush: function flush(e) {\n        return L(b ? C.flush() : Promise.resolve(), e);\n      },\n      allFlags: function allFlags() {\n        var e = {};\n        if (!J) return e;\n\n        for (var n in J) {\n          q(J, n) && (e[n] = ee(n, null, !w.sendEventsOnlyForVariation).value);\n        }\n\n        return e;\n      },\n      close: function close(e) {\n        if (H) return L(Promise.resolve(), e);\n\n        var n = function n() {\n          H = !0, J = {};\n        };\n\n        return L(Promise.resolve().then(function () {\n          if (le(), N && N.stop(), b) return C.stop(), C.flush();\n        }).then(n).catch(n), e);\n      }\n    },\n    options: w,\n    emitter: h,\n    ident: G,\n    logger: m,\n    requestor: V,\n    start: function start() {\n      b && (N && N.start(), C.start());\n    },\n    enqueueEvent: Y,\n    getFlagsInternal: function getFlagsInternal() {\n      return J;\n    },\n    getEnvironmentId: function getEnvironmentId() {\n      return k;\n    },\n    internalChangeEventName: \"internal-change\"\n  };\n}\n\nfunction Ke(e, n) {\n  var t = Object.keys(e);\n\n  if (Object.getOwnPropertySymbols) {\n    var r = Object.getOwnPropertySymbols(e);\n    n && (r = r.filter(function (n) {\n      return Object.getOwnPropertyDescriptor(e, n).enumerable;\n    })), t.push.apply(t, r);\n  }\n\n  return t;\n}\n\nfunction Be(e) {\n  for (var n = 1; n < arguments.length; n++) {\n    var t = null != arguments[n] ? arguments[n] : {};\n    n % 2 ? Ke(Object(t), !0).forEach(function (n) {\n      Ge(e, n, t[n]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : Ke(Object(t)).forEach(function (n) {\n      Object.defineProperty(e, n, Object.getOwnPropertyDescriptor(t, n));\n    });\n  }\n\n  return e;\n}\n\nfunction Ge(e, n, t) {\n  return n in e ? Object.defineProperty(e, n, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[n] = t, e;\n}\n\nvar Xe = Object.freeze({\n  __proto__: null,\n  commonBasicLogger: W,\n  createConsoleLogger: Q,\n  errors: p,\n  initialize: He,\n  messages: Ue,\n  utils: V,\n  version: \"3.6.0\"\n}).commonBasicLogger;\n\nvar We = function We(e) {\n  return Xe(Be({\n    destination: console.log\n  }, e));\n};\n\nvar Qe = {\n  promise: Promise.resolve({\n    status: 200,\n    header: function header() {\n      return null;\n    },\n    body: null\n  })\n};\n\nfunction Ye(e, n, t, r, o) {\n  if (o && !function () {\n    var e = window.navigator && window.navigator.userAgent;\n\n    if (e) {\n      var n = e.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n      if (n) return parseInt(n[2], 10) < 73;\n    }\n\n    return !0;\n  }()) return Qe;\n  var i = new window.XMLHttpRequest();\n\n  for (var a in i.open(e, n, !o), t || {}) {\n    Object.prototype.hasOwnProperty.call(t, a) && i.setRequestHeader(a, t[a]);\n  }\n\n  if (o) return i.send(r), Qe;\n  var u,\n      s = new Promise(function (e, n) {\n    i.addEventListener(\"load\", function () {\n      u || e({\n        status: i.status,\n        header: function header(e) {\n          return i.getResponseHeader(e);\n        },\n        body: i.responseText\n      });\n    }), i.addEventListener(\"error\", function () {\n      u || n(new Error());\n    }), i.send(r);\n  });\n  return {\n    promise: s,\n    cancel: function cancel() {\n      u = !0, i.abort();\n    }\n  };\n}\n\nfunction Ze(e) {\n  var n,\n      t = {\n    synchronousFlush: !1\n  };\n\n  if (window.XMLHttpRequest) {\n    var r = e && e.disableSyncEventPost;\n\n    t.httpRequest = function (e, n, o, i) {\n      var a = t.synchronousFlush & !r;\n      return t.synchronousFlush = !1, Ye(e, n, o, i, a);\n    };\n  }\n\n  t.httpAllowsPost = function () {\n    return void 0 === n && (n = !!window.XMLHttpRequest && \"withCredentials\" in new window.XMLHttpRequest()), n;\n  }, t.httpFallbackPing = function (e) {\n    new window.Image().src = e;\n  };\n  var o,\n      i = e && e.eventUrlTransformer;\n  t.getCurrentUrl = function () {\n    return i ? i(window.location.href) : window.location.href;\n  }, t.isDoNotTrack = function () {\n    var e;\n    return 1 === (e = window.navigator && void 0 !== window.navigator.doNotTrack ? window.navigator.doNotTrack : window.navigator && void 0 !== window.navigator.msDoNotTrack ? window.navigator.msDoNotTrack : window.doNotTrack) || !0 === e || \"1\" === e || \"yes\" === e;\n  };\n\n  try {\n    window.localStorage && (t.localStorage = {\n      get: function get(e) {\n        return new Promise(function (n) {\n          n(window.localStorage.getItem(e));\n        });\n      },\n      set: function set(e, n) {\n        return new Promise(function (t) {\n          window.localStorage.setItem(e, n), t();\n        });\n      },\n      clear: function clear(e) {\n        return new Promise(function (n) {\n          window.localStorage.removeItem(e), n();\n        });\n      }\n    });\n  } catch (e) {\n    t.localStorage = null;\n  }\n\n  if (e && e.useReport && \"function\" == typeof window.EventSourcePolyfill && window.EventSourcePolyfill.supportedOptions && window.EventSourcePolyfill.supportedOptions.method ? (t.eventSourceAllowsReport = !0, o = window.EventSourcePolyfill) : (t.eventSourceAllowsReport = !1, o = window.EventSource), window.EventSource) {\n    var a = 3e5;\n    t.eventSourceFactory = function (e, n) {\n      var t = Be(Be({}, {\n        heartbeatTimeout: a,\n        silentTimeout: a,\n        skipDefaultHeaders: !0\n      }), n);\n      return new o(e, t);\n    }, t.eventSourceIsActive = function (e) {\n      return e.readyState === window.EventSource.OPEN || e.readyState === window.EventSource.CONNECTING;\n    };\n  }\n\n  return t.userAgent = \"JSClient\", t.version = \"2.22.1\", t.diagnosticSdkData = {\n    name: \"js-client-sdk\",\n    version: \"2.22.1\"\n  }, t.diagnosticPlatformData = {\n    name: \"JS\"\n  }, t.diagnosticUseCombinedEvent = !0, t;\n}\n\nvar en = /[|\\\\{}()[\\]^$+*?.]/g,\n    nn = function nn(e) {\n  if (\"string\" != typeof e) throw new TypeError(\"Expected a string\");\n  return e.replace(en, \"\\\\$&\");\n};\n\nfunction tn(e, n, t, r) {\n  var o,\n      i,\n      a = ((\"substring\" === e.kind || \"regex\" === e.kind) && r.includes(\"/\") ? n : n.replace(r, \"\")).replace(t, \"\");\n\n  switch (e.kind) {\n    case \"exact\":\n      i = n, o = new RegExp(\"^\" + nn(e.url) + \"/?$\");\n      break;\n\n    case \"canonical\":\n      i = a, o = new RegExp(\"^\" + nn(e.url) + \"/?$\");\n      break;\n\n    case \"substring\":\n      i = a, o = new RegExp(\".*\" + nn(e.substring) + \".*$\");\n      break;\n\n    case \"regex\":\n      i = a, o = new RegExp(e.pattern);\n      break;\n\n    default:\n      return !1;\n  }\n\n  return o.test(i);\n}\n\nfunction rn(e, n) {\n  for (var t = {}, r = null, o = [], i = 0; i < e.length; i++) {\n    for (var a = e[i], u = a.urls || [], s = 0; s < u.length; s++) {\n      if (tn(u[s], window.location.href, window.location.search, window.location.hash)) {\n        \"pageview\" === a.kind ? n(\"pageview\", a) : (o.push(a), n(\"click_pageview\", a));\n        break;\n      }\n    }\n  }\n\n  return o.length > 0 && (r = function r(e) {\n    for (var t = function (e, n) {\n      for (var t = [], r = 0; r < n.length; r++) {\n        for (var o = e.target, i = n[r], a = i.selector, u = document.querySelectorAll(a); o && u.length > 0;) {\n          for (var s = 0; s < u.length; s++) {\n            o === u[s] && t.push(i);\n          }\n\n          o = o.parentNode;\n        }\n      }\n\n      return t;\n    }(e, o), r = 0; r < t.length; r++) {\n      n(\"click\", t[r]);\n    }\n  }, document.addEventListener(\"click\", r)), t.dispose = function () {\n    document.removeEventListener(\"click\", r);\n  }, t;\n}\n\nfunction on(e, n) {\n  var t, r;\n\n  function o() {\n    r && r.dispose(), t && t.length && (r = rn(t, i));\n  }\n\n  function i(n, t) {\n    var r = e.ident.getUser(),\n        o = {\n      kind: n,\n      key: t.key,\n      data: null,\n      url: window.location.href,\n      user: r,\n      creationDate: new Date().getTime()\n    };\n    return r && r.anonymous && (o.contextKind = \"anonymousUser\"), \"click\" === n && (o.selector = t.selector), e.enqueueEvent(o);\n  }\n\n  return e.requestor.fetchJSON(\"/sdk/goals/\" + e.getEnvironmentId()).then(function (e) {\n    e && e.length > 0 && (r = rn(t = e, i), function (e, n) {\n      var t,\n          r = window.location.href;\n\n      function o() {\n        (t = window.location.href) !== r && (r = t, n());\n      }\n\n      !function e(n, t) {\n        n(), setTimeout(function () {\n          e(n, t);\n        }, t);\n      }(o, e), window.history && window.history.pushState ? window.addEventListener(\"popstate\", o) : window.addEventListener(\"hashchange\", o);\n    }(300, o)), n();\n  }).catch(function (t) {\n    e.emitter.maybeReportError(new p.LDUnexpectedResponseError((t && t.message, t.message))), n();\n  }), {};\n}\n\nvar an = {\n  fetchGoals: {\n    default: !0\n  },\n  hash: {\n    type: \"string\"\n  },\n  eventProcessor: {\n    type: \"object\"\n  },\n  eventUrlTransformer: {\n    type: \"function\"\n  },\n  disableSyncEventPost: {\n    default: !1\n  }\n};\n\nfunction un(e, n) {\n  var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},\n      r = Ze(t),\n      o = He(e, n, t, r, an),\n      i = o.client,\n      a = o.options,\n      u = o.emitter,\n      s = new Promise(function (e) {\n    var n = u.on(\"goalsReady\", function () {\n      u.off(\"goalsReady\", n), e();\n    });\n  });\n  i.waitUntilGoalsReady = function () {\n    return s;\n  }, a.fetchGoals ? on(o, function () {\n    return u.emit(\"goalsReady\");\n  }) : u.emit(\"goalsReady\"), \"complete\" !== document.readyState ? window.addEventListener(\"load\", o.start) : o.start();\n\n  var c = function c() {\n    r.synchronousFlush = !0, i.flush().catch(function () {}), r.synchronousFlush = !1;\n  };\n\n  return window.addEventListener(\"beforeunload\", c), window.addEventListener(\"unload\", c), i;\n}\n\nvar sn = We,\n    cn = Q,\n    ln = \"2.22.1\";\nvar fn = {\n  initialize: function initialize(e, n) {\n    var t = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};\n    return console && console.warn && console.warn(Ue.deprecated(\"default export\", \"named LDClient export\")), un(e, n, t);\n  },\n  version: \"2.22.1\"\n};\nexport default fn;\nexport { sn as basicLogger, cn as createConsoleLogger, un as initialize, ln as version };","map":null,"metadata":{},"sourceType":"module"}